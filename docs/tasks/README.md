# Modern Board - タスク管理

このディレクトリには、Modern Board（匿名掲示板アプリケーション）の開発タスクが含まれています。各タスクは個別のMarkdownファイルとして管理され、複数人での並行開発を可能にします。

## ⚠️ 重要: 作業を始める前に

**必ず以下を実行してください：**

1. **既存のDraft PRを確認** - 同じタスクを他の人が作業中でないか確認
   ```bash
   gh pr list --state open --draft
   ```

2. **Draft PRを作成** - 作業開始時に必ずDraft PRを作成して作業を予約
   ```bash
   gh pr create --draft --title "タスクID: タスク名"
   ```

詳細は「[タスクの進め方](#タスクの進め方)」セクションを参照してください。

## 📁 ディレクトリ構成

```
docs/tasks/
├── README.md               # このファイル
├── backend/                # バックエンド関連タスク
│   ├── BE-001-api-integration-tests.md
│   ├── BE-002-authentication-authorization.md
│   ├── BE-003-spam-prevention-rate-limiting.md
│   └── BE-004-redis-caching.md
├── frontend/               # フロントエンド関連タスク
│   ├── FE-001-project-setup-architecture.md
│   ├── FE-002-component-library.md
│   ├── FE-003-thread-list-page.md
│   └── FE-004-thread-detail-page.md
├── infrastructure/         # インフラ・デプロイ関連タスク
│   ├── INF-001-docker-compose-production.md
│   └── INF-002-cicd-pipeline.md
├── integration/            # 統合テスト関連タスク
│   └── INT-001-e2e-testing.md
└── documentation/          # ドキュメント関連タスク
```

## 🏷️ タスクID命名規則

- **BE-XXX**: Backend（バックエンド）
- **FE-XXX**: Frontend（フロントエンド）
- **INF-XXX**: Infrastructure（インフラ）
- **INT-XXX**: Integration（統合）
- **DOC-XXX**: Documentation（ドキュメント）

## 📊 優先度の定義

各タスクには優先度が設定されています：

- **High**: プロジェクトのコア機能に必要、MVP（最小実用製品）に含まれる
- **Medium**: 重要だが初期リリースには必須ではない
- **Low**: あると良い機能、将来的な改善項目

## 🎯 難易度の定義

- **Easy**: 1-2日で完了可能、基本的な知識で対応可能
- **Medium**: 3-5日で完了可能、中級レベルの知識が必要
- **Hard**: 1週間以上、高度な知識や設計が必要

## 📋 全タスクリスト

### バックエンド（9タスク）
- ✅ BE-000: モデル、シリアライザ、ViewSet実装（完了）
- **BE-001**: API統合テスト（親タスク）
  - BE-001-1: カテゴリ・タグAPI統合テスト
  - BE-001-2: スレッドAPI統合テスト
  - BE-001-3: 投稿・リアクションAPI統合テスト
  - BE-001-4: 統計API統合テスト
- **BE-002**: 認証・認可（親タスク）
  - BE-002-1: セッションベース認証とミドルウェア
  - BE-002-2: CORS設定とセキュリティ
  - BE-002-3: 管理者権限（オプション）
- **BE-003**: スパム対策・レート制限
- **BE-004**: Redisキャッシュ
- **BE-005**: Django管理画面カスタマイズ
- **BE-006**: エラーハンドリング・ロギング

### フロントエンド（11タスク）
- **FE-001**: プロジェクトセットアップとアーキテクチャ
- **FE-002**: 共通コンポーネントライブラリ（親タスク）
  - FE-002-1: Layoutコンポーネント
  - FE-002-2: 基本UIコンポーネント
  - FE-002-3: 掲示板特化コンポーネント
  - FE-002-4: フォームコンポーネント
- **FE-003**: スレッド一覧ページ
- **FE-004**: スレッド詳細・投稿一覧ページ
- **FE-005**: スレッド作成ページ/フォーム ← **追加**
- **FE-006**: レスポンシブデザイン対応 ← **追加**
- **FE-007**: ユニットテスト ← **追加**

### インフラ（3タスク）
- **INF-001**: 本番用Docker Compose設定
- **INF-002**: CI/CDパイプライン
- **INF-003**: デプロイ手順書 ← **追加**

### 統合テスト（1タスク）
- **INT-001**: E2Eテスト

### ドキュメント（1タスク）
- **DOC-001**: 開発環境セットアップガイド ← **追加**

**合計: 25タスク（サブタスク含めると36タスク以上）**

## 🚀 推奨実装順序（PR単位）

### フェーズ1: MVP開発（最優先、約15-20 PRs）

#### ドキュメント（並行可能）
1. **DOC-001**: 開発環境セットアップガイド（他の開発者の参加を可能に）

#### フロントエンド基盤
2. **FE-001**: プロジェクトセットアップ（1 PR）
3. **FE-002-1**: Layoutコンポーネント（1 PR）
4. **FE-002-2**: 基本UIコンポーネント（2 PRs推奨）
5. **FE-002-3**: 掲示板特化コンポーネント（1-2 PRs）
6. **FE-002-4**: フォームコンポーネント（1 PR）

#### バックエンド基盤（フロントエンドと並行可能）
7. **BE-001-1**: カテゴリ・タグAPI統合テスト（1 PR）
8. **BE-001-2**: スレッドAPI統合テスト（1 PR）
9. **BE-001-3**: 投稿・リアクションAPI統合テスト（1 PR）
10. **BE-001-4**: 統計API統合テスト（1 PR）
11. **BE-002-1**: セッションベース認証とミドルウェア（1 PR）
12. **BE-002-2**: CORS設定とセキュリティ（1 PR）

#### ページ実装
13. **FE-003**: スレッド一覧ページ（1 PR）
14. **FE-004**: スレッド詳細・投稿一覧ページ（1 PR）
15. **FE-005**: スレッド作成ページ（1 PR）← **これがないと投稿できない**
16. **FE-006**: レスポンシブデザイン対応（1-2 PRs）

**→ ここまででMVPが動作可能！**

### フェーズ2: 品質向上と管理機能（約8 PRs）

17. **FE-007**: フロントエンドユニットテスト（1-2 PRs）
18. **BE-003**: スパム対策・レート制限（1 PR）
19. **BE-005**: Django管理画面カスタマイズ（1 PR）
20. **BE-006**: エラーハンドリング・ロギング（1 PR）
21. **INT-001**: E2Eテスト（1-2 PRs）

### フェーズ3: 本番環境準備（約3 PRs）

22. **INF-001**: 本番用Docker Compose設定（1 PR）
23. **INF-002**: CI/CDパイプライン（1 PR）
24. **INF-003**: デプロイ手順書（ドキュメントのみ）

### フェーズ4: 最適化（オプション、約2 PRs）

25. **BE-004**: Redisキャッシュ（1 PR）
26. **BE-002-3**: 管理者権限（1 PR、必要に応じて）

## 🎯 完成までのマイルストーン

### マイルストーン1: ローカル動作確認（フェーズ1完了）
- [ ] フロントエンドが起動する
- [ ] バックエンドが起動する
- [ ] スレッド一覧が表示される
- [ ] スレッドを作成できる
- [ ] スレッド詳細で投稿を見られる
- [ ] 投稿を作成できる
- [ ] リアクションを追加できる
- [ ] モバイルでも使える

### マイルストーン2: テスト完備（フェーズ2完了）
- [ ] バックエンドテストカバレッジ90%以上
- [ ] フロントエンドテストカバレッジ75%以上
- [ ] E2Eテストが主要フローをカバー
- [ ] 管理画面からコンテンツ管理ができる

### マイルストーン3: 本番リリース準備（フェーズ3完了）
- [ ] Docker Composeで本番環境構築可能
- [ ] CI/CDで自動デプロイ
- [ ] SSL/TLS設定完了
- [ ] ログ・監視設定完了
- [ ] バックアップ設定完了

### マイルストーン4: 最適化・スケーリング（フェーズ4完了）
- [ ] Redisキャッシュ導入でパフォーマンス向上
- [ ] スケーリング可能な構成

## 📝 タスクフォーマット

各タスクファイルには以下の情報が含まれています：

```markdown
# タスクID: タスク名

## 概要
タスクの説明

## 優先度
High / Medium / Low

## 難易度
Easy / Medium / Hard

## 前提条件
- 依存するタスクや準備事項

## 実装内容
- 具体的な実装項目（チェックリスト形式）

## 受け入れ基準
- タスク完了の判断基準

## 関連タスク
- 関連するタスクのリスト

## 参考
- 参考資料へのリンク
```

## 🔄 タスクの進行管理

### タスクの選択方法

1. **Draft PRの確認**: 既に誰かが作業中でないか確認
   ```bash
   gh pr list --state open --draft
   ```
2. **優先度の確認**: High → Medium → Low の順に着手
3. **前提条件の確認**: 依存するタスクが完了しているか確認
4. **スキルマッチング**: 自分のスキルセットに合ったタスクを選択
5. **並行作業の調整**: チームで相談して分担を決める

### タスクの進め方

#### ⚠️ 重要: 作業開始前に必ずDraft PRを作成すること

作業の重複を防ぐため、以下の手順を**必ず**守ってください：

**1. 既存のDraft PRを確認**
```bash
# GitHubでDraft PRを確認
gh pr list --state open --draft

# または、ブラウザで確認
# https://github.com/user/modern-board/pulls?q=is%3Apr+is%3Aopen+draft%3Atrue
```

**同じタスクのDraft PRが既に存在する場合は、別のタスクを選んでください！**

**2. ブランチを作成**
```bash
# mainブランチから最新を取得
git checkout main
git pull origin main

# 機能ブランチを作成（タスクIDをブランチ名に含める）
git checkout -b feature/BE-001-1-category-tag-api-tests
```

**3. Draft PRを作成**
```bash
# 空コミットを作成してプッシュ
git commit --allow-empty -m "chore: start BE-001-1 - カテゴリ・タグAPI統合テスト"
git push -u origin feature/BE-001-1-category-tag-api-tests

# Draft PRを作成（gh CLIを使用）
gh pr create --draft \
  --title "BE-001-1: カテゴリ・タグAPI統合テスト" \
  --body "## 関連タスク
- docs/tasks/backend/BE-001-1-category-tag-api-tests.md

## 実装予定
- [ ] カテゴリAPI統合テスト
- [ ] タグAPI統合テスト

作業中..."

# または、GitHubのWebUIで作成し、「Create draft pull request」を選択
```

**4. 実装を進める**
- タスクファイルのチェックリストに従って実装
- こまめにコミット・プッシュ
- Draft PRの説明を適宜更新

**5. 実装完了後**
- すべてのテストが通ることを確認
- 受け入れ基準を満たしているか確認
- Draft PRを「Ready for review」に変更
- レビューを依頼

**6. マージ後**
- 関連タスクのステータスを更新
- 次のタスクへ

### ブランチ戦略

```bash
# ブランチの命名規則（タスクIDを含める）
feature/BE-001-1-category-tag-api-tests   # サブタスクの場合
feature/FE-003-thread-list-page            # 単独タスクの場合
feature/INF-001-docker-production          # インフラタスク

# ブランチの種類
main       - 本番環境（保護ブランチ）
develop    - 開発環境（オプション）
feature/*  - 機能開発
bugfix/*   - バグ修正
hotfix/*   - 緊急修正
```

**重要なルール:**
- ✅ 必ずmainブランチから分岐する
- ✅ ブランチ名にタスクIDを含める
- ✅ 1ブランチ = 1タスク = 1PR
- ❌ 複数のタスクを1つのブランチで実装しない
- ❌ 他の人のブランチに直接コミットしない

## 📈 進捗の可視化

GitHub Projectsまたは類似のツールを使用して、タスクの進捗を可視化することを推奨します：

### Draft PRによる進捗管理

- **Draft PR作成済み**: タスク着手（作業予約）
- **Draft PR (In Progress)**: 実装中
- **Ready for Review**: レビュー待ち
- **Approved**: レビュー承認済み
- **Merged**: 完了

### プロジェクトボード（推奨）

| 列 | 状態 | Draft PR |
|---|---|---|
| **📋 Todo** | 未着手 | なし |
| **🚀 In Progress** | 作業中 | Draft PR作成済み |
| **👀 Review** | レビュー待ち | Ready for Review |
| **✅ Done** | 完了 | マージ済み |

**Draft PRのメリット:**
- ✅ 作業の重複を防げる
- ✅ 進捗が可視化される
- ✅ 早期にフィードバックを得られる
- ✅ CIが自動実行される

## 🛠️ 技術スタック（参考）

### バックエンド
- Python 3.13
- Django 5.2+
- Django REST Framework 3.16+
- Wagtail 7.2+
- PostgreSQL 16
- Redis 7
- pytest, pytest-django, pytest-cov
- Ruff（リンター）
- Pyright（型チェッカー）

### フロントエンド
- React 19.2
- TypeScript 5.9
- Vite 7.1
- TanStack Query（推奨）
- Zustand または Jotai（状態管理、推奨）
- shadcn/ui + Tailwind CSS（推奨）
- Vitest（テスト）
- Playwright（E2Eテスト）

### インフラ
- Docker & Docker Compose
- GitHub Actions（CI/CD）
- Nginx（リバースプロキシ）
- Gunicorn（WSGIサーバー）

## 📚 追加リソース

- [開発ガイドライン](../DEVELOPMENT.md)（作成予定）
- [APIドキュメント](http://localhost:8000/api/schema/swagger-ui/)（開発環境）
- [テストガイド](https://refrainit.com/list/testing-guide-python-typescript/)
- [コーディング規約](../CODING_STANDARDS.md)（作成予定）

## 🤝 貢献方法

1. タスクを選択し、自分に割り当てる
2. 機能ブランチを作成する
3. 実装とテストを行う
4. プルリクエストを作成する
5. コードレビューを受ける
6. マージ後、タスクを完了としてマークする

## ❓ 質問・相談

- 技術的な質問: GitHub Discussionsまたはチームチャット
- タスクの優先度変更: プロジェクトマネージャーに相談
- 新しいタスクの追加: 提案を議論してから追加

---

**最終更新日**: 2025-11-24
**ドキュメントバージョン**: 1.0
